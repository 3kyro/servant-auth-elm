<!doctype html>
<html>
    <head>
    <meta charset="utf-8">
    </head>

    <body>
        <div id="myapp"></div>
        <script src="app.js"></script>
        <script>
            // Send elm all cookies if they have changed
            function onCookieChange(callback, interval = 1000) {
                let prevCookie = document.cookie;
                setInterval(()=> {
                  let cookie = document.cookie;
                  if (cookie !== prevCookie) {
                      callback(cookie);
                  }
                }, interval);
            }

            let app = Elm.App.init(
                { node: document.getElementById("myapp")
                , flags: document.cookie
                }
            );

            onCookieChange( cookie => app.ports.toElm.send(cookie));


        </script>
    </body>
</html>
